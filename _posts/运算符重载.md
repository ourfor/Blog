---
title: 运算符重载
date: 2018-05-28 23:00:01
tags: [读书笔记,C++,运算符重载]
categories: "学习笔记"
repo: ourfor | My-C-Learning
src: 莉娜.jpg
---
今天5月28日，老师说大概还有一个月就会搞那个上机考试，回顾我这半年来的学习，感觉没能坚持每天敲代码成了唯一的遗憾，是啊，还有一个月，我还是每天练练手感吧，这不，` C++ `也快学完了，把作业里面的代码写一写。前几天重写了[博客的搭建教程](https://blog.ourfor.top/2018/03/06/hexo-github-coding%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/),我觉得还算详细吧。有兴趣可以看看👀。

<!--more-->
## C++ 运算符重载
- 在` C++ `中` 分数 `不是*预先定义的*，需要建立一个***分数类***，使之具有下述功能：能防止分母为*0*,当分数不是最简形式时进行约分以及避免分母为` 负数 `，用重载运算符完成加法、减法、乘法以及除法等四则运算。

- 在第一问的基础上，用重载关系符` == `判断两个分数是否相等。

写一个交换的函数：
```bash
void Swap(int &Num_u,int &Num_d)
{
	if(Num_u>Num_d)                 //确保Num_d>=Num_u
	{
		int temp=Num_u;
		Num_u=Num_d;
		Num_d=temp;
	}

}
```
首先，定义下分数类。

- [x] 在类中重载操作符时，为了使运算符函数能够访问类中的私有成员，那么运算符函数就必须重载为` 非静态成员函数 `或者` 友元函数 `
- [x] 由于类成员函数` this指针 `的缘故，运算符函数重载为类的成员函数时，所需的参数个数总比它的操作数少*1*.


```c++
//分数类的定义
class fraction
{
public:
	int MaxNum(int a,int b);
	fraction(int u_,int d_){num_u=u_;num_d=d_;}
	fraction(){num_u=0;num_d=0;}
	void Display();
	void Sample();

	//运算符重载
	int operator == (fraction a1);
	friend fraction operator + (fraction a1,fraction a2);
	friend fraction operator - (fraction a1,fraction a2);
	friend fraction operator * (fraction a1,fraction a2);
	friend fraction operator / (fraction a1,fraction a2);

private:
	int num_u;                 //分子
	int num_d;				   //分母
};

int fraction::MaxNum(int a,int b)
{
	Swap(a,b);
	if(a==0) return b;
	return MaxNum(b-a,a);
}

void fraction::Display()
{
	Sample();
	if(num_u==0) cout << "0" << endl;
	else
	{
		if(num_d==1&&num_u!=0) cout << num_u << endl;
		else cout << num_u << "/" << num_d << endl;
	}
	
}

void fraction::Sample()
{
	int b=MaxNum(num_u,num_d);
	num_u=num_u / b;
	num_d=num_d /b;
}


int fraction::operator == (fraction a1)
{
	int d;
	d=MaxNum(num_d,num_u);
	num_u=num_u / d;
	num_d=num_d / d;
	d=MaxNum(a1.num_d,a1.num_u);
	a1.num_u=a1.num_u / d;
	a1.num_d=a1.num_d / d;
	if(a1.num_u==num_u&&a1.num_d==num_d) return 1;
	return 0;
}

fraction operator + (fraction a1,fraction a2)
{
	fraction c;
	c.num_d=a1.num_d * a2.num_d;
	c.num_u=a1.num_u * a2.num_d + a2.num_u *a1.num_d;
	return c;
}

fraction operator - (fraction a1,fraction a2)
{
	fraction c;
	c.num_d=a1.num_d * a2.num_d;
	c.num_u=a1.num_u * a2.num_d - a2.num_u *a1.num_d;
	return c;
}

fraction operator * (fraction a1,fraction a2)
{
	fraction c;
	c.num_d=a1.num_d * a2.num_d;
	c.num_u=a1.num_u * a2.num_u;
	return c;
}

fraction operator / (fraction a1,fraction a2)
{
	fraction c;
	c.num_d=a1.num_d * a2.num_u;
	c.num_u=a1.num_u * a2.num_d;
	return c;
}


int main()
{
	fraction c(12,72);
	c.Display();
	int d=c.MaxNum(12,72);
	cout << d << endl;

	fraction m(1,6);
	if(m==c) cout << "相等\n";

	fraction e;
	e=m + c;
	e.Display();
	e=m - c;
	e.Display();
	e=m * c;
	e.Display();
	e=m / c;
	e.Display();



	return 0;
}
```
[完整代码](https://github.com/ourfor/My-C-Learning/blob/master/homework/fraction.cpp)

## 数据结构-二叉树
```c++
#include<iostream>
#include<cstdio>
using namespace std;

//定义状态代码
#define OK 1
#define ERROR 0
#define INFEASIBLE -1
#define OVERFLOW -2

//类型定义
typedef int Status;
typedef char TElemType;

//树的结构体定义
typedef struct BiNode{
	TElemType data;
	struct BiNode *lchild,*rchild;
}BiNode,*BiTree;

//创建一棵树🌲
void CreateTree(BiTree &T)
{
	char ch;
	scanf("%c",&ch);
	if(ch==' ') T=NULL;
	else{
		if(!(T=(BiTree)malloc(sizeof(BiNode)))) exit(OVERFLOW);
		T->data=ch;
		CreateTree(T->lchild);
		CreateTree(T->rchild);
	}
}

//先序遍历二叉树
void Pre(BiTree T)
{
	if(T)
	{
		cout << T->data;
		Pre(T->lchild);
		Pre(T->rchild);
	}
}

//树的深度

int Leaves(BiTree T)
{
	static int count=0;
	if(T){
	
		if(!T->lchild&&!T->rchild) count++;
		Leaves(T->lchild);
		Leaves(T->rchild);
	}

	return count;
}

int depth(BiTree T)
{
	int level;
	if(T==NULL) level=0;
	else{
		level=1+(depth(T->lchild)>depth(T->rchild)?depth(T->lchild):depth(T->rchild));
	}
	return level;
}

//主函数
int main()
{
	BiTree T;
	cout << "输入二叉树中的结点：\n";
	CreateTree(T);
	cout << "\n先序遍历二叉树：\n";
	Pre(T);
	cout << "\n二叉树叶子个数：";
	cout << Leaves(T);
	cout << "\n树的层次为：\n" << depth(T);


	return 0;
}
```

11点了，今天太晚了，立个目标，下次继续复习。


<div id="app"></div>
<!-- 加载 cplayer 脚本 -->
<script src="https://cdn.jsdelivr.net/gh/MoePlayer/cPlayer/dist/cplayer.js"></script>
<script>
  let player = new cplayer({
    element: document.getElementById('app'),
    autoplay: true,
    showPlaylist: true,
    playlist: [
     {
        src: 'http://ozkg680jm.bkt.clouddn.com/%E8%B5%B5%E7%B4%AB%E9%AA%85-%E5%8F%AF%E4%B9%90.mp3',
        poster: 'http://ozkg680jm.bkt.clouddn.com/%E5%8F%AF%E4%B9%90-%E8%B5%B5%E7%B4%AB%E9%AA%85.jpg',
        name: '可乐',
        artist: '赵紫骅',
        lyric: '[ti:可乐]\n[ar:赵浴辰]\n[al:可乐]\n[by:]\n[offset:0]\n[00:00.10]可乐 - 赵紫骅\n[00:00.20]词：赵紫骅\n[00:00.30]曲：赵紫骅\n[00:00.40]\n[00:31.20]可惜在遇见我那天你并不快乐\n[00:36.42]\n[00:38.20]可能是因为我们相遇的太晚了\n[00:44.47]\n[00:45.62]可是我要走了\n[00:48.51]\n[00:49.34]可温暖要走了\n[00:52.18]\n[00:53.08]可否有另一个我在你身后给予快乐\n[00:59.54]\n[01:01.37]可当我牵着你的手傻乎乎的乐\n[01:06.33]\n[01:08.17]渴望的爱情终于在我生命出现了\n[01:14.57]\n[01:15.65]可时间倒数了\n[01:18.55]\n[01:19.23]可你的答案停住了\n[01:22.49]\n[01:23.10]可想到你的脸我还是很快乐\n[01:30.16]可能你不快乐\n[01:33.39]\n[01:34.09]可惜你不快乐\n[01:36.89]\n[01:37.74]可能是我的爱情它来的太晚了\n[01:44.66]\n[01:45.64]可他给了你些什么\n[01:49.82]你是不是真快乐\n[01:53.50]可要听我的话别再为他犯傻了\n[02:00.16]可能你不快乐\n[02:03.93]可我要你快乐\n[02:07.37]\n[02:07.94]可能是我的爱情它来的太晚了\n[02:14.99]\n[02:15.68]可我只想对你说\n[02:19.40]我绝对不退出了\n[02:23.16]可以让你快乐是我的快乐\n[02:32.58]\n[02:42.46]可当我牵着你的手傻乎乎的乐\n[02:47.64]\n[02:49.43]渴望的爱情终于在我生命出现了\n[02:55.87]\n[02:56.96]可时间倒数了\n[03:00.00]\n[03:00.58]可你的答案停住了\n[03:03.82]\n[03:04.39]可想到你的脸我还是很快乐\n[03:11.04]\n[03:11.72]可能你不快乐\n[03:15.15]可惜你不快乐\n[03:18.51]\n[03:19.16]可能是我的爱情它来的太晚了\n[03:26.26]\n[03:26.91]可他给了你些什么\n[03:30.52]\n[03:31.09]你是不是真快乐\n[03:34.82]可要听我的话别再为他犯傻了\n[03:41.40]可能你不快乐\n[03:45.16]可我要你快乐\n[03:49.22]可能是我的爱情它来的太晚了\n[03:56.96]可我只想对你说\n[04:00.65]我绝对不退出了\n[04:04.45]可以让你快乐是我的快乐\n[04:16.24]\n[04:24.76]不快乐\n[04:25.87]\n[04:26.60]可惜你不快乐\n[04:29.42]\n[04:30.55]可能是我的爱情它来的太晚了\n[04:38.19]可他给了你些什么\n[04:41.92]\n[04:42.44]你是不是真快乐\n[04:46.04]可要听我的话别再为他犯傻了\n[04:52.72]可能你不快乐\n[04:56.35]可我要你快乐\n[04:59.81]\n[05:00.44]可能是我的爱情它来的太晚了\n[05:08.16]可我只想对你说][05:11.39][05:11.91]我绝对不退出了[05:15.09][05:15.63]可以让你快乐是我的快乐'
      }
    ]
  })
</script>

