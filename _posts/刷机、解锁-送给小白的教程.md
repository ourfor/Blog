---
title: 刷机、解锁-送给小白的教程
date: 2018-09-16 16:58:16
tags: [刷机,解锁,twrp,root]
repo: ourfor | MI6_Optimization 
src: //i.imgur.com/GLbnpKD.jpg 
---

酷安上一直有酷友问我我的手机上的那些个性化的东西是怎么弄得，以及我制作的magisk模块该怎么使用？说来话长，要使用magisk模块，你需要做以下几件事：1.首先有bl🔒️，要解锁bootloader 2.输入第三方recovery 3.刷入[topjohnwu](//github.com/topjohnwu/Magisk)的 *magisk* 环境 4.刷入制作好的magisk模块。必要时还要备份基带。就这么简单的几步，看似简单，却***very important***

<!--more-->

本教程涉及设备及环境：
- 小米6 
- Windows环境下解锁bootloader
- Windows或OS X下都可以刷入第三方recovery

# 解锁bootloader
> 如果你的手机没有bl锁，可以忽略这一步

- [小米手机解锁](//www.miui.com/unlock/index.html)
点击` 立即解锁 `之后登录` 小米帐号 `再次点击***立即解锁***就会跳转到解锁工具的下载页面。这个解锁工具只有windows版本的下载，所以需要一台联网的windows环境的电脑。需要登录自己的小米帐号才能解锁。

---

![TWRP](https://i.imgur.com/vZQRgUn.png)

# 刷入第三方recovery
推荐使用[twrp](//twrp.me)适配的recovery，点击右侧的menu，选择device，找到你的设备，在你的设备详情页面里面的`Downlink Links`里面有两个镜像站，可以点击` Americas `或者` Europe `下载。

### 刷入recovery
下面有几种方法刷入recovery：

1. Install Android SDK 

以OS X为例(假定你已经安装了brew)，在` Terminal `中输入:

```bash
brew cask install android-platform-tools
```
安装完毕后，数据线连接电脑，执行下面命令：

```bash
adb reboot bootloader  #或者关机后，按下电源键和音量减进入fastboot模式
fastboot flash recovery twrp.img     #twrp.img替换成你下载的recovery的绝对路径，或者之间将recovery文件拖进Terminal窗口
fastboot reboot
```

2.如果你之前root了手机，手机安装Terminal之后，可以使用dd刷入recovery，在Terminal里面输入:

```bash
su  #将root权限授予Terminal
dd if=/sdcard/twrp.img of=/dev/block/bootdevice/by-name/recovery       #将下载的recovery改名为twrp.img,放在sdcard目录下，或者input file填写你下载的recovery的绝对路径
```
再刷入第三方ROM前，一些必要的备份就特别重要
- 备份EFS(基带)
- 备份所有分区(非必须,类似于Windows下面的一键ghost)

![Backup](https://i.imgur.com/ii80ddI.png)
![Backuo Complete](https://i.imgur.com/dP6q47X.png)

## 刷入第三方ROM

- 刷入第三方ROM前需要在twrp里面清除部分Data分区、Cache分区以及虚拟机Dalvik缓存，俗称` 三清 `

![Wipe](https://i.imgur.com/8J9vXGq.png)

> 如果原系统是miui，在刷入原生ROM之后，可能还好格式化内部存储，因为miui对内部存储加密了，不格式化，原生rom无法开机和使用内部存储空间

在TWRP主界面，在Wipe之后，点击Install选择刷机包：
![Install](https://i.imgur.com/a6bhzgV.png)

# Other

刷入PE的小米6:
![Setting](https://i.imgur.com/faweJ0T.png)
![酷安](https://i.imgur.com/aBsSayO.png)
![Lancher](https://i.imgur.com/AqJw18B.png)
![开关](https://i.imgur.com/JukJAIC.png)
